---
{"dg-publish":true,"permalink":"/prosto-zadachi/pylkaya-lyubov/"}
---

#задача 

Очередная задача с [[Сайты/codeforces\|codeforces]], с рейтингом **\*1600**

# условие
см. [на CF](https://codeforces.com/problemset/problem/814/C)

# размышление
для начала нужно понять когда, район строки $[l; r]$ может быть полностью окрашен в любимый цвет.

очевидно, тогда когда количество любимого света ПЛЮС $m$ больше или равно чем, количество символов в этом районе.

т.е. необходимо быстро считать количество любого цвета на диапазоне, здесь буду использовать [[Структуры Данных/Префиксное гавно\|Префиксное гавно]], назову его $p$, для каждого цвета $c$ буду искать префиксное количество его вхождений на диапазоне.

сейчас район $l$ и $r$ подходит если ($p$ - префиксное количество вхождений $c$):

$$(r - l) - (p[r] - p[l]) \leq m$$
теперь с помощью [[Метод 2 указателей\|Метод 2 указателей]] можно для каждого $l$ искать максимальную границу $r$.  Ответ максимум $r-l$ для каждого $r$ и $l$ - максимальная левая граница для $r$ теперь с помощью метода двух 
интервалов и 

# code
```cpp
// Copyright (C) 2024 by semenInRussia

#include <bits/stdc++.h>
using namespace std;

const int maxc = 26;

int main() {
  int n;
  cin >> n;
  string s;
  cin >> s;
  s += ' ';
  vector<vector<int>> cnt(maxc, vector<int>(n + 1, 0));
  for (int c = 0; c < maxc; c++)
    for (int i = 1; i < n; i++)
      cnt[c][i + 1] = cnt[c][i] + (s[i] == c + 'a');

  int q;
  cin >> q;
  for (int z = 0; z < q; z++) {
    int m;
    char c;
    cin >> m >> c;
    c -= 'a';

    int ans = 0, l = 0, r = 0;
    while (l < n) {
      if (r != n) {
        for (; r <= n; r++) {
          if ((r - l) - (cnt[c][r] - cnt[c][l]) > m) {
            r--;
            break;
          }
        }
      }
      r = min(r, n);
      ans = max(ans, r - l);
      l++;
    }

    cout << ans << '\n';
  }
}
```