---
{"dg-publish":true,"permalink":"/prosto-zadachi/kratnye-2019/"}
---

#–∑–∞–¥–∞—á–∞ 
–ë–µ–∑ –ª–∏—à–Ω–∏—Ö —Å–ª–æ–≤, –∑–∞–¥–∞—á–∞ —Å *atcoder*

https://atcoder.jp/contests/abc164/tasks/abc164_d

# –£—Å–ª–æ–≤–∏–µ 

> –¥–∞–Ω–æ —á–∏—Å–ª–æ $x$  –¥–ª–∏–Ω–Ω–æ–π $n \leq 400000$, –Ω—É–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∏—Å–µ–ª –≤–Ω—É—Ç—Ä–∏ $x$, –∫–æ—Ç–æ—Ä–æ–µ –±—É–¥–µ—Ç –Ω–∞—Ü–µ–ª–æ –¥–µ–ª–∏—Ç—Å—è –Ω–∞ 2019

# –†–∞–∑–º—ã—à–ª–µ–Ω–∏–µ

–ë—É–¥—É –∏–¥—Ç–∏ —Å–ø—Ä–∞–≤–∞ –Ω–∞ –ª–µ–≤–æ, —Å–æ–±–∏—Ä–∞—è —á–∏—Å–ª–æ –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ —Å—Ç–≤–æ–ª–∞ –¥–æ –∫–æ–Ω—Ü–∞ $x$.  

*–ï—Å–ª–∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –≤—Å–µ —ç—Ç–∏ —á–∏—Å–ª–∞ –≤ –º–∞—Å—Å–∏–≤–µ $s_i$ ‚Äî —á–∏—Å–ª–æ —Å –∏–Ω–¥–µ–∫—Å–∞ $i$ –¥–æ $n$, —Ç–æ –∫–∞–∫–∏–µ —á–∏—Å–ª–∞ –≤–Ω—É—Ç—Ä–∏ –¥–∞–Ω–Ω–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –Ω–∞—Ö–æ–¥—è—Ç—Å—è?*

–î–æ–ø—É—Å—Ç–∏–º, –º—ã –Ω–∞ $i$, –Ω—É–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤—Å–µ —á–∏—Å–ª–∞ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ –æ–Ω $i$ –¥–æ $n$, –∏—Ö –ª–µ–≥–∫–æ –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –ø–æ —Ñ–æ—Ä–º—É–ª–µ.

$\forall j \leq n: x = s_i - s_j$

–ü—Ä–∞–≤–¥–∞, –≤—Å–µ $x$ –±—É–¥—É—Ç —Å –ª–∏—à–Ω–∏–º–∏ –Ω—É–ª—è–º–∏, –Ω–æ —ç—Ç–∏ –Ω—É–ª–∏ –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ –¥–µ–ª–∏–º–æ—Å—Ç—å –Ω–∞ 2019.

–ò—Å–ø–æ–ª—å–∑—É—è —ç—Ç–æ, –º–æ–∂–Ω–æ —Å–¥–∞—Ç—å –∑–∞ $O(N^2)$:  —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —á–∏—Å–ª–∞ —Å–ø—Ä–∞–≤–∞ –Ω–∞ –ª–µ–≤–æ, —Å–æ—Ö—Ä–∞–Ω—è—è –≤ $s_i$, –ø–æ—Ç–æ–º –¥–ª—è –∫–∞–∂–¥–æ–≥–æ $i$ –∏—Å–∫–∞—Ç—å –≤—Å–µ $j$

–ß—Ç–æ–±—ã —Å–¥–∞—Ç—å –∑–∞ –ª–∏–Ω–µ–π–Ω–æ–µ –≤—Ä–µ–º—è, –Ω—É–∂–Ω–æ –Ω–∞–π—Ç–∏ —Å–ø–æ—Å–æ–±, –∫–∞–∫ –¥–ª—è $i$ –∏—Å–∫–∞—Ç—å –≤—Å–µ $j$, —á—Ç–æ–± $s$ —Å $i$ –¥–æ $j$ –¥–µ–ª–∏–ª–æ—Å—å –Ω–∞ 2019.  –ò —ç—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å, –∑–Ω–∞—è –ø—Ä–∏—ë–º [[–î–µ–ª–∏—Ç–µ–ª—å —Ä–∞–∑–Ω–∏—Ü—ã\|–î–µ–ª–∏—Ç–µ–ª—å —Ä–∞–∑–Ω–∏—Ü—ã]].  –¢.–µ. –µ—Å–ª–∏ –¥–ª—è $s_i \mod 2019 = m$, —Ç–æ –≤—Å–µ–≥–æ –Ω—É–∂–Ω—ã—Ö $j$ —Å—Ç–æ–ª—å–∫–æ, —Å–∫–æ–ª—å–∫–æ –±—ã–ª–æ –Ω–∞–π–¥–µ–Ω–æ –¥–æ —ç—Ç–æ–≥–æ $j$, —á—Ç–æ–±—ã –æ—Å—Ç–∞—Ç–æ–∫ —Ç–µ–±–µ –±—ã–ª $m$.

–û–∫.  –ù–æ –≤—Å—ë —ç—Ç–æ –≤—Ä–µ–º—è —è –æ–±—Ö–æ–¥–∏–ª —Å—Ç–æ—Ä–æ–Ω–æ–π –ø—Ä–æ–±–ª–µ–º—É —Å–ª–∏—à–∫–∏—Ö –±–æ–ª—å—à–∏—Ö —á–∏—Å–µ–ª (–≤ –¥–∞–Ω–Ω–æ–º —Ä–µ—à–µ–Ω–∏–∏ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º–∞, —á—Ç–æ `x` –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞–∑–º–µ—Ä–æ–º 400000 —Ü–∏—Ñ—Ä).  –ù–æ —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ –∏–∑–±–µ–∂–∞—Ç—å.  –ù–∞–º –Ω–µ –Ω—É–∂–Ω–æ –∫–∞–∂–¥—ã–π —Ä–∞–∑ –Ω—É–∂–Ω–æ —á–∏—Å–ª–æ –æ—Ç $i$ –¥–æ $n$, –Ω–∞–º –Ω—É–∂–µ–Ω –ª–∏—à—å –º–æ–¥—É–ª—å –æ—Ç —ç—Ç–æ–≥–æ —á–∏—Å–ª–∞ –Ω–∞ 2019.  $s_i$ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ø–æ —Ñ–æ—Ä–º—É–ª–µ $s_i = d \cdot p + s_{i-1}$, –∑–¥–µ—Å—å $d$ ‚Äî —Ü–∏—Ñ—Ä–∞, $p$ ‚Äî –º–Ω–æ–∂–∏—Ç–µ–ª—å 10. –¢–∞–∫ –∫–∞–∫ –Ω–∞–º –Ω—É–∂–µ–Ω –ª–∏—à—å –º–æ–¥—É–ª—å 2019, —Ç–æ —Ñ–æ—Ä–º—É–ª—É –º–æ–∂–Ω–æ –ø–æ–º–µ–Ω—è—Ç—å

$$s_i = (d \cdot p \mod 2019) + s_{i-1}$$

–≠—Ç–æ –≤—ã—Ö–æ–¥–∏—Ç –∏–∑ –∑–∞—è–≤–ª–µ–Ω–∏—è, —á—Ç–æ
$$a \cdot b= (a\ \%\ m)b \mod m$$
# –ö–æ–¥ üñ•
```python
a = input()
n = len(a)

cnt = [0 for _ in range(2019)]
cnt[0] = 1

p = 1
ans = 0
x = 0
for i in range(n-1, -1, -1):
    d = int(a[i])
    x = (p * d + x) % 2019
    ans += cnt[x]
    cnt[x] += 1
    p = (p * 10) % 2019

print(ans)
```