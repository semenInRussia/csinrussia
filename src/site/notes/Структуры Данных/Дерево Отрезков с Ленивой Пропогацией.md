---
{"dg-publish":true,"permalink":"/struktury-dannyh/derevo-otrezkov-s-lenivoj-propogacziej/"}
---

–õ–µ–Ω–∏–≤–∞—è –ü—Ä–æ–ø–æ–≥–∞—Ü–∏—è –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã [[–°—Ç—Ä—É–∫—Ç—É—Ä—ã –î–∞–Ω–Ω—ã—Ö/–î–µ—Ä–µ–≤–æ –û—Ç—Ä–µ–∑–∫–æ–≤\|–î–µ—Ä–µ–≤–æ –û—Ç—Ä–µ–∑–∫–æ–≤]] —É–ª—É—á—à–∞–µ—Ç –µ–≥–æ —Ç–µ–º, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –∑–∞ `O(log N)`

# –û–ø–∏—Å–∞–Ω–∏–µ üìù

–ò–¥–µ—è –≤ —Ç–æ–º, —á—Ç–æ –∫–æ–≥–¥–∞ –ø—Ä–∏—Ö–æ–¥–∏—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ –ø–µ—Ä–µ—Ä–∞—Å—á–∏—Ç—ã–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É–∑–ª–∞ –≤ –¥–µ—Ä–µ–≤–µ, –∫–∞–∫ –º—ã –¥–µ–ª–∞–ª–∏ –¥–∞–ª—å—à–µ.  –ê –ø–µ—Ä–µ—Ä–∞—Å—á–∏—Ç—ã–≤–∞—Ç—å –∏—Ö, —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –Ω–∞ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø–æ—Å—Ç—É–ø–∏—Ç –∑–∞–ø—Ä–æ—Å.

–ò –≤–ø—Ä–∞–≤–¥—É.  –ï—Å–ª–∏ –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –Ω–∞ **–∏–∑–º–µ–Ω–µ–Ω–∏–µ**, —Ç–æ –Ω–∞–¥–æ –∏—Å–∫–∞—Ç—å –≤—Å–µ —É–∑–ª—ã, –≤ —Å—É–º–º–µ –ø–æ–∫—Ä—ã–≤–∞—é—â–∏—Ö –∏–Ω—Ç–µ—Ä–≤–∞–ª, –∏ –¥–ª—è —É–∑–ª–æ–≤ –≤ –¥—Ä—É–≥–æ–º –¥–µ—Ä–µ–≤–µ `t` —Ç–∞–∫–æ–≥–æ –∂–µ —Ä–∞–∑–º–µ—Ä–∞, –∏–∑–º–µ–Ω—è—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –∏–º –∑–Ω–∞—á–µ–Ω–∏—è, –ø—Ä–∏ —ç—Ç–æ–º –∫–æ–≥–¥–∞ –±—É–¥–µ–º –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –ø–æ —É–∑–ª–∞–º, –¥–µ–ª–∞—Ç—å `push`: –µ—Å–ª–∏ –∫ –Ω–µ–º—É –±—ã–ª–æ –¥–æ —ç—Ç–æ–≥–æ –¥—Ä—É–≥–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ, —Ç–æ –ø–µ—Ä–µ—Ä–∞—Å—á–∏—Ç—ã–≤–∞—Ç—å –µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è, –ø–æ–º–µ—á–∞—è `t` –∫–∞–∫ *–ø—É—Å—Ç–æ*, –∏ –∏–∑–º–µ–Ω—è—è `t`.

–í —Ñ—É–Ω–∫—Ü–∏–∏ **–ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è** –Ω–∞–¥–æ –¥–æ–±–∞–≤–∏—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –ø—É—Å—Ç–æ–≥–æ –¥–µ—Ä–µ–≤–æ –¥–µ—Ä–µ–≤–∞ `t`, –≤–∞–∂–Ω–æ —É–º–µ—Ç—å –ø–æ–Ω–∏–º–∞—Ç—å –ø—É—Å—Ç–æ–µ –ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ `t`

–í —Ñ—É–Ω–∫—Ü–∏–∏ **–∑–∞–ø—Ä–æ—Å–∞** –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–º —É–∑–ª–∞ –≤—ã—à–µ —É–ø–æ–º—è–Ω—É—Ç—ã–π `push`.

# –ö–∞–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–¥—Ö–æ–¥—è—Ç? 

–ü—É—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏—è $f(a, b)$ - —Ñ—É–Ω–∫—Ü–∏—è –Ω–∞ –∑–∞–ø—Ä–æ—Å, –∞ —Ñ—É–Ω–∫—Ü–∏—è $g(x, v)$ ‚Äî —Ñ—É–Ω–∫—Ü–∏—è –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ (–∑–¥–µ—Å—å $x$ - —Å—Ç–∞—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –∞ $v$ ‚Äî –Ω–æ–≤–æ–µ, –Ω—É –∏–ª–∏ –Ω–æ–≤–æ–µ, –∞ –≤—Ç–æ—Ä–æ–µ —Å–ª–∞–≥–∞–µ–º–æ–µ –Ω–∞–ø—Ä–∏–º–µ—Ä)

–¢–æ–≥–¥–∞ –Ω—É–∂–Ω–æ —á—Ç–æ–±—ã –±—ã–ª–æ –≤–µ—Ä–Ω–æ —Å–ª–µ–¥—É—é—â–µ–µ —É—Ä–∞–≤–Ω–µ–Ω–∏–µ:

> $$f(g(a,v), g(b,v)) = g(f(a,b), v)$$

–°—é–¥–∞ –ø–æ–¥—Ö–æ–¥–∏—Ç –Ω–∞–ø—Ä–∏–º–µ—Ä –ø–∞—Ä–∞ `min` –∏ `+v`

# –°—Å—ã–ª–∫–∏ üß†

- https://cp-algorithms.com/data_structures/segment_tree.html
