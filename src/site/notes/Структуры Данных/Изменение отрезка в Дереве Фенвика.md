---
{"dg-publish":true,"permalink":"/struktury-dannyh/izmenenie-otrezka-v-dereve-fenvika/"}
---

[[Структуры Данных/Дерево Фенвика\|Дерево Фенвика]] — красивая структура, которую довольно быстро можно закодить.  Однако проосирает [Дереву Отрезков](дерево отрезков), ведь не может в изменения на интервале.

Ща я решу эту проблему

Решаем проблему на $a$

Идея в том, чтобы приставить что существует какой-то $b$ - просто какой-то массив.  А наш массив $a$ — это его [[Структуры Данных/Префиксная сумма\|префиксная сумма]].

Т.е.
$$a_i = b_1 + b_2 + \cdots + b_i$$
Здесь надо чуть подумать.  

*Как изменить интервал от $l$ до конца ($n$)?*

Надо изменить $b_i$!  Ведь так, как $a$ это префиксная сумма, то все префксные суммы после $a_i$ будут иметь $b_i$, меняя $b_i$ мы меняем целый интервал.

Получается можно к $a_i$ прибавить $x$, и тогда мы изменим интервал $[i; n]$.  Чтобы изменить интервал $[i; j]$, надо сделать 2 запроса: $[i; n] + x$, $[j+1; n] - x$

А чтобы получить значение $a$ в $i$, надо просто запустить `sum(i)`