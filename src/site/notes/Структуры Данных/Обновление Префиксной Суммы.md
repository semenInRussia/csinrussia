---
{"dg-publish":true,"permalink":"/struktury-dannyh/obnovlenie-prefiksnoj-summy/"}
---

–†–µ—à–∞—è –∑–∞–¥–∞—á–∫—É [Hayble Stacking](https://usaco.org/index.php?page=viewproblem2&cpid=104) —Å [[–°–∞–π—Ç—ã/usaco.guide\|usaco.guide]] –Ø —Å–ª–µ–≥–∫–∞ —É–¥–∏–≤–∏–ª—Å—è.  –ó–∞–¥–∞—á–∞ –ª—ë–≥–∫–∞—è, –¥–∞. –ù–æ –ø–æ –º–Ω–µ —Å–∞–º–æ–µ –æ—á–µ–≤–∏–¥–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –±—ã–ª–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å [[–°—Ç—Ä—É–∫—Ç—É—Ä—ã –î–∞–Ω–Ω—ã—Ö/–ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ—Ç—Ä–µ–∑–∫–∞ –≤ –î–µ—Ä–µ–≤–µ –§–µ–Ω–≤–∏–∫–∞\|–ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ—Ç—Ä–µ–∑–∫–∞ –≤ –î–µ—Ä–µ–≤–µ –§–µ–Ω–≤–∏–∫–∞]], –æ–¥–Ω–∞–∫–æ –≥–ª–∞–≤—É, –∫–æ—Ç–æ—Ä—É—é —è –ø—Ä–æ—Ö–æ–¥–∏–ª –±—ã–ª–∞ –æ [[–°—Ç—Ä—É–∫—Ç—É—Ä—ã –î–∞–Ω–Ω—ã—Ö/–ü—Ä–µ—Ñ–∏–∫—Å–Ω–∞—è —Å—É–º–º–∞\|–ø—Ä–µ—Ñ–∏–∫—Å–Ω—ã—Ö —Å—É–º–º–∞—Ö]], —á—Ç–æ –º–Ω–µ –ø–æ–∫–∞–∑–∞–ª–æ—Å—å —Å—Ç—Ä–∞–Ω–Ω—ã–º.

–ò –∑–¥–µ—Å—å –¥–æ –º–µ–Ω—è –¥–æ—à–ª–æ!

–í –ø—Ä–µ—Ñ–∏–∫—Å–Ω—ã—Ö —Å—É–º–º–∞—Ö —Ç–æ–∂–µ –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö.  –¢–æ–≥–¥–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è $O(1)$, –∞ —Å–ª–æ–∂–Ω–æ—Å—Ç—å —Å–ª–µ–¥—É—é—â–µ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –º–∞—Å—Å–∏–≤–∞ $O(N)$, –ø—Ä–∏—á—ë–º –æ–¥–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ —Ç–æ–∂–µ $O(N)$, –∑–¥–µ—Å—å –µ—Å—Ç—å –≤—Å—ë-—Ç–∞–∫–∏ –ø—Ä–æ–∏–≥—Ä—ã—à –æ—Ç –§–µ–Ω–≤–∏–∫–∞, —Ö–æ—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –í–°–ï–ì–û –º–∞—Å—Å–∏–≤–∞, –±—ã—Å—Ç—Ä–µ–µ –ø—Ä–∏ –ü—Ä–µ—Ñ–∏–∫—Å–Ω–æ–π —Å—É–º–º—ã.

# –ö–∞–∫? ü§Ø

–ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –¥–æ —ç—Ç–æ–≥–æ –Ω–µ—Å–ª–æ–∂–Ω–æ –¥–æ–≥–∞–¥–∞—Ç—å—Å—è —Å–∞–º–æ–º—É.

–ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å—Ç—å –∏—Å—Ö–æ–¥–Ω—ã–π –º–∞—Å—Å–∏–≤ $a$, –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Å 10 –¥–æ 763 –Ω–∞ 2.  –î–ª—è —ç—Ç–æ–≥–æ –∑–∞–≤–µ–¥—ë–º –º–∞—Å—Å–∏–≤ $b$ ‚Äî —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤, –Ω–∞–¥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å –ë–£–î–¢–û $a$ —ç—Ç–æ –µ–≥–æ –ø—Ä–µ—Ñ–∏–∫—Å–Ω–∞—è —Å—É–º–º–∞. –ò–∑–º–µ–Ω—è—è $b_l$ –Ω–∞ 2, –º—ã –∏–∑–º–µ–Ω—è–µ–º –≤—Å–µ –ø—Ä–µ—Ñ–∫—Å–Ω—ã–µ —Å—É–º–º—ã –ø–æ—Å–ª–µ $l$ –Ω–∞ 2, –ø–æ—Ç–æ–º —É–º–µ–Ω—å—à–∏—Ç—å $b_r$ –Ω–∞ 2, —á—Ç–æ–±—ã –æ—Ç–º–µ–Ω–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç –¥–ª—è –≤—Å–µ—Ö $a_i$ –±–æ–ª—å—à–µ $l$, –Ω–æ –º–µ–Ω—å—à–∏–µ $r$ (–Ω–µ –≤—Ö–æ–¥—è—â–∏–µ –≤ –∏–Ω—Ç–µ—Ä–≤–∞–ª).  –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ, –Ω–∞–¥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å $a$ –ø–æ—Å–ª–µ –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤, —ç—Ç–æ –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å –ø–æ —Ç–∏–ø–∏—á–Ω–æ–º—É –∞–ª–≥–æ—Ä–∏—Ç–º—É —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞ –ø—Ä–µ—Ñ–∏–∫—Å–Ω–æ–π —Å—É–º–º—ã –Ω–∞–¥ $b$.