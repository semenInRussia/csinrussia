---
{"dg-publish":true,"permalink":"/struktury-dannyh/prefiksnaya-summa/"}
---

–≠—Ç–æ [[–°—Ç—Ä—É–∫—Ç—É—Ä—ã –î–∞–Ω–Ω—ã—Ö/–ó–∞–ø—Ä–æ—Å–Ω–∞—è –°—Ç—Ä—É–∫—Ç—É—Ä–∞\|–ó–∞–ø—Ä–æ—Å–Ω–∞—è –°—Ç—Ä—É–∫—Ç—É—Ä–∞]] –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–ª—è –Ω–µ–º–Ω–æ–≥–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π (`+`, `xor`) –∑–∞ `O(1)` –¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å –Ω–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –∏ –¥–µ–ª–∞—Ç—å –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∑–∞ `O(N)`

# –û–ø–∏—Å–∞–Ω–∏–µ üìù

–ó–∞–≤–µ–¥—ë–º –º–∞—Å—Å–∏–≤ `s`, —á—Ç–æ–± `s[i]` —ç—Ç–æ —Å—É–º–º–∞ –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –æ—Ç 0 –¥–æ `i` –Ω–µ –≤–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ.

# –ö–∞–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏? üî¢

–¢–∞–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ *–æ—Ç–º–µ–Ω–∏—Ç—å*

–¢–∏–ø–æ –ø–ª—é—Å –º–æ–∂–Ω–æ –æ—Ç–º–µ–Ω–∏—Ç—å –º–∏–Ω—É—Å–æ–º, `xor` `xor`'–æ–º.  –í —ç—Ç–æ–º –≥–ª–∞–≤–Ω—ã–π –º–∏–Ω—É—Å –ø–µ—Ä–µ–¥ [[–°—Ç—Ä—É–∫—Ç—É—Ä—ã –î–∞–Ω–Ω—ã—Ö/–î–µ—Ä–µ–≤–æ –û—Ç—Ä–µ–∑–∫–æ–≤\|–î–µ—Ä–µ–≤–æ –û—Ç—Ä–µ–∑–∫–æ–≤]], –∞ –µ—â—ë –∏–∑–º–µ–Ω—è—Ç—å –Ω–µ–ª—å–∑—è
# –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ üî®

–ß–∏—Å—Ç–æ –ø–æ —Ñ–æ—Ä–º—É–ª–µ:

> $s_{i-1} = s_i + a_i$
> $s_0 = 0$

–í—ã—á–∏—Ç–∞–µ–º –≤ —Ü–∏–∫–ª–µ –¥–ª—è `i` –¥–æ `n`

# –ó–∞–ø—Ä–æ—Å 

–ó–∞–ø—Ä–æ—Å –Ω–∞ `[l; r)` –ø—Ä–æ—Å—Ç–æ –∏–∑–∏:

> `s[r] - s[l]`

–ü—Ä–æ—Å—Ç–æ

# –°—Å—ã–ª–∫–∏ üåê
- https://ru.algorithmica.org/cs/range-queries/prefix-sum/
# C++

–í `std` –±–∏–±–ª–∏–æ—Ç–µ–∫–µ —é–∑–∞–π—Ç–µ –º–µ—Ç–æ–¥ `std::partial_sum()`, –Ω–µ –∑–∞–±—ã–≤–∞–π—Ç–µ –¥–µ–ª–∞—Ç—å `s` —Å —Ä–∞–∑–º–µ—Ä–æ–º –Ω–∞ –æ–¥–∏–Ω –±–æ–ª—å—à–µ, –∏ –≤ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å `s.begin() + 1`

```cpp
#include <iostream>
#include <numeric>
#include <vector>

using namespace std;

int main() {
  vector<int> a = {1, 2, 3, 4};
  int n = a.size();
  vector<int> b(n + 1);

  partial_sum(a.begin(), a.end(), b.begin() + 1);

  cout << "Array: ";
  for (auto x : a) cout << x << ' ';
  cout << "\n";

  cout << "PrefixArray: ";
  for (auto x : b) cout << x << ' ';
  cout << "\n";
  cout << "sum[2; 4) = " << (b[4] - b[2]) << '\n';

  return 0;
}
```
